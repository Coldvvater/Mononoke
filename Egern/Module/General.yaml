#!name=Advanced Settings & URL Redirect
#!desc=高级设置及通用的 URL 重定向优化（如 Google 搜索及地图、AbeamTV 区域限制等）

url_rewrites:
  - match: ^https?:\/\/(www.)?(g|google)\.cn
    location: https://www.google.com
    status_code: 302
  - match: ^https?:\/\/(ditu|maps).google\.cn
    location: https://maps.google.com
    status_code: 302
  - match: ^https?:\/\/(www.)?taobao\.com\/
    location: https://taobao.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?jd\.com\/
    location: https://www.jd.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?mi\.com\/
    location: https://www.mi.com/
    status_code: 302
  - match: ^https?:\/\/you\.163\.com\/
    location: https://you.163.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?suning\.com\/
    location: https://suning.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?yhd\.com\/
    location: https://yhd.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?firefox\.com\.cn\/(download\/)?$
    location: https://www.mozilla.org/zh-CN/firefox/new/
    status_code: 302
  - match: ^https?:\/\/(www.)?ign\.xn--fiqs8s\/
    location: http://cn.ign.com/ccpref/us
    status_code: 302
  - match: ^https?:\/\/(www.)?abbyychina\.com\/
    location: https://www.abbyy.cn/
    status_code: 302
  - match: ^https?:\/\/(www.)?alienskins\.cn\/
    location: https://exposure.software/
    status_code: 302
  - match: ^https?:\/\/(www.)?anydeskchina\.cn\/
    location: https://anydesk.com/zhs
    status_code: 302
  - match: ^https?:\/\/(www.)?bartender\.cc\/
    location: https://www.macbartender.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?(betterzipcn|betterzip)\.(com|net)\/
    location: https://macitbetter.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?beyondcompare\.cc\/
    location: https://www.scootersoftware.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?bingdianhuanyuan\.cn\/
    location: https://www.faronics.com/zh-hans/products/deep-freeze
    status_code: 302
  - match: ^https?:\/\/(www.)?chemdraw\.com\.cn\/
    location: https://www.perkinelmer.com.cn/
    status_code: 302
  - match: ^https?:\/\/(www.)?codesoftchina\.com\/
    location: https://www.teklynx.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?coreldrawchina\.com\/
    location: https://www.coreldraw.com/cn/
    status_code: 302
  - match: ^https?:\/\/(www.)?crossoverchina\.com\/
    location: https://www.codeweavers.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?dongmansoft\.com\/
    location: https://www.udongman.cn/
    status_code: 302
  - match: ^https?:\/\/(www.)?earmasterchina\.cn\/
    location: https://www.earmaster.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?easyrecoverychina\.com\/
    location: https://www.ontrack.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?ediuschina\.com\/
    location: https://www.grassvalley.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?flstudiochina\.com\/
    location: https://www.image-line.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?folxchina\.cn\/
    location: https://mac.eltima.com/cn/download-manager.html
    status_code: 302
  - match: ^https?:\/\/(www.)?formysql\.com\/
    location: https://www.navicat.com.cn/
    status_code: 302
  - match: ^https?:\/\/(www.)?guitarpro\.cc\/
    location: https://www.guitar-pro.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?huishenghuiying\.com\.cn\/
    location: https://www.coreldraw.com/cn/
    status_code: 302
  - match: ^https?:\/\/(www.)?hypeapp\.cn\/
    location: https://tumult.com/hype/
    status_code: 302
  - match: ^https?:\/\/hypersnap\.mairuan\.com\/
    location: https://www.hyperionics.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?iconworkshop\.cn\/
    location: https://www.axialis.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?idmchina\.net\/
    location: https://www.internetdownloadmanager.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?imazingchina\.com\/
    location: https://imazing.com/zh
    status_code: 302
  - match: ^https?:\/\/(www.)?imindmap\.cc\/
    location: https://www.ayoa.com/previously-imindmap/
    status_code: 302
  - match: ^https?:\/\/(www.)?jihehuaban\.com\.cn\/
    location: https://www.chartwellyorke.com/sketchpad/x24795.html
    status_code: 302
  - match: ^https?:\/\/hypersnap\.mairuan\.com\/
    location: https://www.keyshot.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?kingdeecn\.cn\/
    location: http://www.kingdee.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?logoshejishi\.com
    location: https://www.sothink.com/product/logo-design-software/
    status_code: 302
  - match: ^https?:\/\/logoshejishi\.mairuan\.com\/
    location: https://www.sothink.com/product/logo-design-software/
    status_code: 302
  - match: ^https?:\/\/(www.)?luping\.net\.cn\/
    location: https://www.techsmith.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?mathtype\.cn\/
    location: https://www.dessci.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?mindmanager\.(cc|cn)\/
    location: https://www.mindjet.com/cn/
    status_code: 302
  - match: ^https?:\/\/(www.)?mindmapper\.cc\/
    location: https://www.mindmapper.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?(mycleanmymac|xitongqingli)\.com\/
    location: https://macpaw.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?nicelabel\.cc\/
    location: https://www.nicelabel.com/zh/
    status_code: 302
  - match: ^https?:\/\/(www.)?ntfsformac\.cc\/
    location: https://www.tuxera.com/products/tuxera-ntfs-for-mac-cn/
    status_code: 302
  - match: ^https?:\/\/(www.)?ntfsformac\.cn\/
    location: https://china.paragon-software.com/home-mac/ntfs-for-mac/
    status_code: 302
  - match: ^https?:\/\/(www.)?officesoftcn\.com\/
    location: https://www.microsoft.com/zh-cn/microsoft-365
    status_code: 302
  - match: ^https?:\/\/(www.)?overturechina\.com\/
    location: https://sonicscores.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?passwordrecovery\.cn\/
    location: https://cn.elcomsoft.com/aopr.html
    status_code: 302
  - match: ^https?:\/\/(www.)?pdfexpert\.cc\/
    location: https://pdfexpert.com/zh
    status_code: 302
  - match: ^https?:\/\/(www.)?photozoomchina\.com\/
    location: https://www.benvista.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?shankejingling\.com\/
    location: https://www.sothink.com/product/flashdecompiler/
    status_code: 302
  - match: ^https?:\/\/cn\.ultraiso\.net\/
    location: https://cn.ezbsystems.com/ultraiso/
    status_code: 302
  - match: ^https?:\/\/(www.)?vegaschina\.cn\/
    location: https://www.vegascreativesoftware.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?xshellcn\.com\/
    location: https://www.netsarang.com/zh/xshell/
    status_code: 302
  - match: ^https?:\/\/(www.)?yuanchengxiezuo\.com\/
    location: https://www.teamviewer.com/
    status_code: 302
  - match: ^https?:\/\/(www.)?zbrushcn\.com\/
    location: https://pixologic.com/
    status_code: 302
  - match: ^https?:\/\/api\.abema\.io\/v\d\/ip\/check
    location: http://reject
    status_code: 307
  - match: >-
      (^https?:\/\/app\.biliintl\.com\/(x\/)?(intl|dm|reply|history|v\d\/(fav|msgfeed)).+?)(&s_locale=zh-Hans_[A-Z]{2})(.+?)(&sim_code=\d+)(.+)
    location: $1&s_locale=zh-Hans_PH$6&sim_code=51503$8
    status_code: 307
  - match: >-
      (^https?:\/\/passport\.biliintl\.com\/x\/intl\/passport-login\/.+)(&s_locale=zh-Hans_[A-Z]{2})(.+)(&sim_code=\d+)(.+)
    location: $1&s_locale=zh-Hans_PH$35&sim_code=51503$5
    status_code: 307
  - match: ^http:\/\/(www.)?aicoin\.cn\/$
    location: https://www.aicoin.com/
    status_code: 302
scriptings:
  - http_request:
      name: bstar_login
      script_url: >-
        https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Rewrite/bstar.js
      match: >-
        ^https?:\/\/passport\.biliintl\.com\/x\/intl\/passport-login\/(sms\/send|reg\/sms|oauth2\/access_token|login\/sms)
      body_required: true
  - http_request:
      name: bstar_play
      script_url: >-
        https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Rewrite/bstar.js
      match: >-
        ^https?:\/\/app\.biliintl\.com\/(intl\/gateway\/v\d\/app\/data\/report\/heartbeat\/mobile|x\/(history|reply)/v\d/add)
      body_required: true
mitm:
  hostnames:
    - www.google.cn
    - www.firefox.com.cn
    - api.abema.io
    - app.biliintl.com
    - passport.biliintl.com
